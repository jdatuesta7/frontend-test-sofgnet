<app-sidebar></app-sidebar>

<div class="container mt-4">

    <div class="row">
        <h1 class="col-md-8 fs-2">Listado de rutas</h1>

        <div class="col-md-4">
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#route-create">Nueva
                ruta
            </button>
        </div>
    </div>

    <table class="table table-striped table-hover bg-white mt-4">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Conductor</th>
                <th scope="col">SSD</th>
                <th scope="col">Vehiculo</th>
                <th scope="col">Descripcion</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let route of routes; let i = index">
                <th scope="row">{{i+1}}</th>
                <td>{{route.driver.first_name + ' ' + route.driver.last_name}}</td>
                <td>{{route.driver.ssd}}</td>
                <td>{{route.vehicle.make}}</td>
                <td>
                    {{route.description.slice(0, 70) }}{{ route.description.length >= 70 ? '...' : '' }}
                </td>

                <td>
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Acciones
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                            <li><a [routerLink]="['/routes/', route.id ,'schedules']" routerLinkActive="router-link-active"  class="dropdown-item" role="button">Horarios</a></li>
                            <li><a (click)="editRoute(route)" class="dropdown-item" role="button">Editar</a></li>
                            <li><a (click)="removeRoute(route.id)" class="dropdown-item" role="button">Eliminar</a>
                            </li>
                        </ul>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <app-routes-create></app-routes-create>

    <button #asBtnEditModal type="button" hidden data-bs-toggle="modal" data-bs-target="#route-edit">
        Editar vehiculo
    </button>
    <app-routes-edit></app-routes-edit>
</div>